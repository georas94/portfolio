version: "3.8"

services:
    db:
        environment:
            MYSQL_ROOT_PASSWORD: toto44
        image: "mariadb:10.7.1"
        networks:
            - tools
        ports:
            - "3306:3306"
        volumes:
            - "./docker/shared/mysql:/var/lib/mysql"

    mailcatcher:
        container_name: mailcatcher
        restart: always
        image: stpaquet/alpinemailcatcher:latest
        networks:
            - tools
        environment:
            - MAIL_LIMIT=70
            - TIMEZONE=Europe/Paris
        ports:
            - '1080:1080'
            - '1025:1025'

    nginx-proxy:
        image: 'jc21/nginx-proxy-manager:latest'
        restart: unless-stopped
        ports:
            - '80:80'
            - '81:81'
            - '443:443'
        volumes:
            - /var/run/docker.sock:/tmp/docker.sock:ro
            - ./data:/data
            - ./letsencrypt:/etc/letsencrypt
        networks:
            - tools

networks:
    tools:
